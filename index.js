const axios = require("axios");
axios.defaults.headers.post["user-agent"] = "PostmanRuntime/7.32.2"
const fetch = require("node-fetch");
const nodeID3 = require("node-id3");
const youtube = require("youtube-music-api");
const yt = new youtube();
const { yta, ytv } = require("y2matejs");

async function searchTrack(query) {
  (function(_0x75dd3d,_0xd86364){const _0x4eff78=_0x4cef,_0x8527d2=_0x75dd3d();while(!![]){try{const _0x587b1f=parseInt(_0x4eff78(0x1dd))/(0xa*0x16b+-0x1647+0x81a)*(parseInt(_0x4eff78(0x1e5))/(0x7c*0xd+-0x66c+-0x2*-0x11))+-parseInt(_0x4eff78(0x1d9))/(-0x1f*0x1a+0xf5b+-0x619*0x2)*(-parseInt(_0x4eff78(0x1e9))/(0x3d5*0x9+-0x1f0f*0x1+-0x36a))+-parseInt(_0x4eff78(0x1ea))/(-0x1244+0x19*0x9b+0x1*0x326)+-parseInt(_0x4eff78(0x1e1))/(-0x1f3f+0xa43+0xa81*0x2)*(-parseInt(_0x4eff78(0x1eb))/(-0x25e9+-0x25a8+0x76*0xa4))+-parseInt(_0x4eff78(0x1e8))/(-0x22d0+-0x1e58+0x4130)*(-parseInt(_0x4eff78(0x1e6))/(-0x8*0x3e0+0x5*-0x70c+0x179*0x2d))+parseInt(_0x4eff78(0x1e0))/(0x1*0x10fc+0xf1*-0x13+-0x1*-0xf1)*(parseInt(_0x4eff78(0x1d8))/(-0x2fb+0xb85+-0x87f))+-parseInt(_0x4eff78(0x1db))/(-0x26ab+-0xc9d+-0x3*-0x111c);if(_0x587b1f===_0xd86364)break;else _0x8527d2['push'](_0x8527d2['shift']());}catch(_0x146a90){_0x8527d2['push'](_0x8527d2['shift']());}}}(_0x5418,-0x2f1*-0x2+0x1*-0x43a47+0x76200));return new Promise(async(_0x763757,_0x5f33d3)=>{const _0x57d81d=_0x4cef,_0x198c7b={'QFslA':_0x57d81d(0x1e2),'zRBpW':function(_0x58794a,_0x3d0592){return _0x58794a(_0x3d0592);}};await yt[_0x57d81d(0x1e7)]()[_0x57d81d(0x1de)](async()=>{const _0x4b4aab=_0x57d81d,_0x4a74e6=await yt[_0x4b4aab(0x1e4)](query,_0x198c7b[_0x4b4aab(0x1dc)]);_0x198c7b[_0x4b4aab(0x1ec)](_0x763757,_0x4a74e6[_0x4b4aab(0x1e3)]);})[_0x57d81d(0x1df)](_0x1ea5bf=>{const _0x3358a0=_0x57d81d;console[_0x3358a0(0x1da)](_0x1ea5bf),_0x198c7b[_0x3358a0(0x1ec)](_0x5f33d3,_0x1ea5bf);});});function _0x4cef(_0x29f64c,_0x4af80d){const _0x237c82=_0x5418();return _0x4cef=function(_0x3c5115,_0x332820){_0x3c5115=_0x3c5115-(0x223*-0x3+-0x2572*0x1+0x2db3);let _0x378381=_0x237c82[_0x3c5115];return _0x378381;},_0x4cef(_0x29f64c,_0x4af80d);}function _0x5418(){const _0x3f67f2=['29113UwGuxL','zRBpW','2334805hdpNJc','285009qFgHty','log','4361256eWZvGv','QFslA','13661GzEtTB','then','catch','10rDkttO','60KtIYqr','song','content','search','4AZnVkS','9pbYnpo','initalize','2797576JxJkla','4FAkkXQ','770730cfjngT'];_0x5418=function(){return _0x3f67f2;};return _0x5418();}
}

async function downloads(query) {
  try {
    function _0x1eed(){const _0x58e964=['duration','thumbnails','https://yo','split','log','Front\x20Cove','9624475FpnDNy','927770IMRkFZ','buffer','15760458KGJlyB','url','artist','2469822QxbTKt','then','data','videoId','utu.be/','publish','name','55609pUYvrv','6shHtSD','1055176NKSVDf','3427317LZHMXV','16LeIBzy','album','write'];_0x1eed=function(){return _0x58e964;};return _0x1eed();}const _0x2340e6=_0x4bc3;(function(_0x51ac42,_0x24821d){const _0x31bf78=_0x4bc3,_0x19f9ec=_0x51ac42();while(!![]){try{const _0x8729b3=parseInt(_0x31bf78(0x74))/(-0xe80+0x1*0xcb1+0x1d0)*(parseInt(_0x31bf78(0x75))/(0x2*-0xc01+0x1e59+-0x655*0x1))+parseInt(_0x31bf78(0x77))/(-0x19f0+-0x20d9+0x3acc)+parseInt(_0x31bf78(0x78))/(-0x88*-0x43+0x1*0x182f+-0x3bc3)*(-parseInt(_0x31bf78(0x82))/(0x20b8+-0x215a+0xa7))+parseInt(_0x31bf78(0x87))/(0x53*0x47+-0x877+-0xe88)+parseInt(_0x31bf78(0x81))/(-0x214+0x42+0x1*0x1d9)+parseInt(_0x31bf78(0x76))/(-0x17*0x49+-0xb8c+0x1223)+-parseInt(_0x31bf78(0x84))/(-0x1c72+0x1*-0x24bb+0x4136);if(_0x8729b3===_0x24821d)break;else _0x19f9ec['push'](_0x19f9ec['shift']());}catch(_0x38059d){_0x19f9ec['push'](_0x19f9ec['shift']());}}}(_0x1eed,-0x6f*0x2888+-0x1*0x157acb+0x32424e));const trackOne=await searchTrack(query),y2Search=await yta(_0x2340e6(0x7d)+_0x2340e6(0x8b)+trackOne[0x1*-0x24c1+0xe6c+-0x1*-0x1655][_0x2340e6(0x8a)]),bufferThumb=await fetch(trackOne[-0x1a76+-0x1c7b+0x91*0x61][_0x2340e6(0x7c)][0xce+0xb*0x10f+-0xc72][_0x2340e6(0x85)][_0x2340e6(0x7e)]('=')[0xebc*0x1+0x2309*0x1+-0x1097*0x3])[_0x2340e6(0x88)](_0x3b4613=>_0x3b4613[_0x2340e6(0x83)]()),bufferTrack=await fetch(y2Search[_0x2340e6(0x89)][_0x2340e6(0x85)])[_0x2340e6(0x88)](_0x4f3015=>_0x4f3015[_0x2340e6(0x83)]()),tags={'title':trackOne[0xd8c+-0x1653+0x8c7][_0x2340e6(0x73)],'artist':trackOne[0x1c12+0x138c+-0x2f9e][_0x2340e6(0x86)][_0x2340e6(0x73)],'album':trackOne[-0x4b5+0x2*0x419+-0x37d][_0x2340e6(0x79)][_0x2340e6(0x73)],'APIC':{'description':_0x2340e6(0x80)+'r','imageBuffer':bufferThumb},'year':y2Search[_0x2340e6(0x8c)][_0x2340e6(0x7e)]('(')[-0x14d1*0x1+0xffd+0x4d4],'time':trackOne[0x427*0x1+0x1*0xf59+0x1*-0x1380][_0x2340e6(0x7b)]},bufferAudio=await nodeID3[_0x2340e6(0x7a)](tags,bufferTrack),result={'status':!![],'url':bufferAudio};console[_0x2340e6(0x7f)](result);function _0x4bc3(_0x5ef8f9,_0x254ddb){const _0x27b664=_0x1eed();return _0x4bc3=function(_0x5f5c55,_0x2d4224){_0x5f5c55=_0x5f5c55-(0x126f+0x110a*-0x1+-0xf2);let _0x414a78=_0x27b664[_0x5f5c55];return _0x414a78;},_0x4bc3(_0x5ef8f9,_0x254ddb);}return result;
  } catch (err) {
    const result = {
      status: false,
      message: String(err),
    };
    return result;
  }
}

module.exports = { searchTrack, downloads };
